var SalinaPDFViewer=(()=>{var Z=Object.create;var P=Object.defineProperty,G=Object.defineProperties,Q=Object.getOwnPropertyDescriptor,J=Object.getOwnPropertyDescriptors,Y=Object.getOwnPropertyNames,z=Object.getOwnPropertySymbols,X=Object.getPrototypeOf,$=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable;var _=(s,t,e)=>t in s?P(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e,f=(s,t)=>{for(var e in t||(t={}))$.call(t,e)&&_(s,e,t[e]);if(z)for(var e of z(t))ee.call(t,e)&&_(s,e,t[e]);return s},V=(s,t)=>G(s,J(t));var te=(s,t)=>()=>(t||s((t={exports:{}}).exports,t),t.exports),ie=(s,t)=>{for(var e in t)P(s,e,{get:t[e],enumerable:!0})},j=(s,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Y(t))!$.call(s,n)&&n!==e&&P(s,n,{get:()=>t[n],enumerable:!(i=Q(t,n))||i.enumerable});return s};var ne=(s,t,e)=>(e=s!=null?Z(X(s)):{},j(t||!s||!s.__esModule?P(e,"default",{value:s,enumerable:!0}):e,s)),re=s=>j(P({},"__esModule",{value:!0}),s);var u=(s,t,e)=>new Promise((i,n)=>{var r=o=>{try{h(e.next(o))}catch(c){n(c)}},a=o=>{try{h(e.throw(o))}catch(c){n(c)}},h=o=>o.done?i(o.value):Promise.resolve(o.value).then(r,a);h((e=e.apply(s,t)).next())});var B=te((we,k)=>{"use strict";var se=Object.prototype.hasOwnProperty,p="~";function S(){}Object.create&&(S.prototype=Object.create(null),new S().__proto__||(p=!1));function ae(s,t,e){this.fn=s,this.context=t,this.once=e||!1}function N(s,t,e,i,n){if(typeof e!="function")throw new TypeError("The listener must be a function");var r=new ae(e,i||s,n),a=p?p+t:t;return s._events[a]?s._events[a].fn?s._events[a]=[s._events[a],r]:s._events[a].push(r):(s._events[a]=r,s._eventsCount++),s}function H(s,t){--s._eventsCount===0?s._events=new S:delete s._events[t]}function g(){this._events=new S,this._eventsCount=0}g.prototype.eventNames=function(){var t=[],e,i;if(this._eventsCount===0)return t;for(i in e=this._events)se.call(e,i)&&t.push(p?i.slice(1):i);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(e)):t};g.prototype.listeners=function(t){var e=p?p+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,r=i.length,a=new Array(r);n<r;n++)a[n]=i[n].fn;return a};g.prototype.listenerCount=function(t){var e=p?p+t:t,i=this._events[e];return i?i.fn?1:i.length:0};g.prototype.emit=function(t,e,i,n,r,a){var h=p?p+t:t;if(!this._events[h])return!1;var o=this._events[h],c=arguments.length,m,l;if(o.fn){switch(o.once&&this.removeListener(t,o.fn,void 0,!0),c){case 1:return o.fn.call(o.context),!0;case 2:return o.fn.call(o.context,e),!0;case 3:return o.fn.call(o.context,e,i),!0;case 4:return o.fn.call(o.context,e,i,n),!0;case 5:return o.fn.call(o.context,e,i,n,r),!0;case 6:return o.fn.call(o.context,e,i,n,r,a),!0}for(l=1,m=new Array(c-1);l<c;l++)m[l-1]=arguments[l];o.fn.apply(o.context,m)}else{var T=o.length,v;for(l=0;l<T;l++)switch(o[l].once&&this.removeListener(t,o[l].fn,void 0,!0),c){case 1:o[l].fn.call(o[l].context);break;case 2:o[l].fn.call(o[l].context,e);break;case 3:o[l].fn.call(o[l].context,e,i);break;case 4:o[l].fn.call(o[l].context,e,i,n);break;default:if(!m)for(v=1,m=new Array(c-1);v<c;v++)m[v-1]=arguments[v];o[l].fn.apply(o[l].context,m)}}return!0};g.prototype.on=function(t,e,i){return N(this,t,e,i,!1)};g.prototype.once=function(t,e,i){return N(this,t,e,i,!0)};g.prototype.removeListener=function(t,e,i,n){var r=p?p+t:t;if(!this._events[r])return this;if(!e)return H(this,r),this;var a=this._events[r];if(a.fn)a.fn===e&&(!n||a.once)&&(!i||a.context===i)&&H(this,r);else{for(var h=0,o=[],c=a.length;h<c;h++)(a[h].fn!==e||n&&!a[h].once||i&&a[h].context!==i)&&o.push(a[h]);o.length?this._events[r]=o.length===1?o[0]:o:H(this,r)}return this};g.prototype.removeAllListeners=function(t){var e;return t?(e=p?p+t:t,this._events[e]&&H(this,e)):(this._events=new S,this._eventsCount=0),this};g.prototype.off=g.prototype.removeListener;g.prototype.addListener=g.prototype.on;g.prefixed=p;g.EventEmitter=g;typeof k!="undefined"&&(k.exports=g)});var ye={};ie(ye,{MemoryManager:()=>E,PDFRenderer:()=>x,PerformanceOptimizer:()=>w,SalinaPDFViewer:()=>R,SearchEngine:()=>y,SimpleHighlighter:()=>b,VERSION:()=>be,VirtualScrolling:()=>L,clamp:()=>ce,debounce:()=>he,deepMerge:()=>U,delay:()=>K,downloadBlob:()=>W,downloadData:()=>pe,formatFileSize:()=>fe,generateId:()=>oe,getRangeRect:()=>ue,isBrowser:()=>q,isInViewport:()=>ge,isTouchDevice:()=>me,loadFile:()=>de,retry:()=>ve,throttle:()=>le});var D=ne(B(),1);var b=class{constructor(t){this.activeHighlight=null;this.highlightElements=[];this.copyHintElement=null;this.scale=1;this.options=t,this.setupEventListeners()}updateScale(t){this.scale=t,this.rerenderHighlights()}setupEventListeners(){document.addEventListener("mouseup",this.handleMouseUp.bind(this)),document.addEventListener("click",this.handleDocumentClick.bind(this)),document.addEventListener("keydown",this.handleKeyDown.bind(this))}handleMouseUp(){setTimeout(()=>{let t=window.getSelection();if(!t||!t.toString().trim()||t.rangeCount===0)return;let e=t.toString().trim(),i=t.getRangeAt(0),n=this.findPageNumber(i);if(!n)return;let r=document.getElementById(`page-${n}`);if(!r)return;let a=r.querySelector(".react-pdf__Page__textContent")||r.querySelector(".salina-pdf-text-layer");if(!a)return;let h=i.startContainer,o=i.endContainer,c=i.commonAncestorContainer;if(!(a.contains(h)||a.contains(o)||a.contains(c)))return;let l=this.createHighlightRectangles(i,r);l.length>0&&(this.setActiveHighlight({pageNumber:n,text:e,rectangles:l,timestamp:Date.now()}),setTimeout(()=>{t.removeAllRanges()},10))},10)}handleDocumentClick(t){let e=t.target;if(!e.closest(".salina-copy-hint")&&this.activeHighlight){let i=document.getElementById(`page-${this.activeHighlight.pageNumber}`);if(!(i!=null&&i.contains(e))){this.clearHighlights();return}let n=i.querySelector(".react-pdf__Page__textContent")||i.querySelector(".salina-pdf-text-layer");n&&!n.contains(e)&&!e.closest(".salina-highlight")&&this.clearHighlights()}}handleKeyDown(t){t.key==="Escape"?this.clearHighlights():(t.ctrlKey||t.metaKey)&&t.key==="c"&&this.activeHighlight&&(t.preventDefault(),this.copyToClipboard())}findPageNumber(t){let e=t.commonAncestorContainer;for(;e&&e!==document;){if(e.nodeType===Node.ELEMENT_NODE){let i=e;if(i.id&&i.id.match(/^page-\d+$/))return parseInt(i.id.replace("page-",""));let n=i.getAttribute("data-page-number");if(n)return parseInt(n);let r=i.closest('[id^="page-"]')||i.closest("[data-page-number]");if(r){if(r.id&&r.id.match(/^page-\d+$/))return parseInt(r.id.replace("page-",""));let a=r.getAttribute("data-page-number");if(a)return parseInt(a)}}e=e.parentNode}return null}createHighlightRectangles(t,e){let i=e.getBoundingClientRect(),n=t.getClientRects(),r=[];return Array.from(n).forEach(a=>{if(a.width>0&&a.height>0){let h=a.left-i.left,o=a.top-i.top;r.push({x:h/this.scale,y:o/this.scale,width:a.width/this.scale,height:a.height/this.scale})}}),r}setActiveHighlight(t){this.clearHighlights(),this.activeHighlight=t,this.renderHighlights(),this.options.copyHintEnabled&&this.renderCopyHint()}renderHighlights(){if(!this.activeHighlight)return;let t=document.getElementById(`page-${this.activeHighlight.pageNumber}`);t&&this.activeHighlight.rectangles.forEach((e,i)=>{let n=document.createElement("div");n.className="salina-highlight salina-simple-highlight",n.setAttribute("data-page",this.activeHighlight.pageNumber.toString()),n.title=this.activeHighlight.text,Object.assign(n.style,{position:"absolute",left:`${e.x*this.scale}px`,top:`${e.y*this.scale}px`,width:`${e.width*this.scale}px`,height:`${e.height*this.scale}px`,backgroundColor:this.options.highlightColor,borderRadius:"2px",pointerEvents:"none",zIndex:"5",mixBlendMode:"multiply",transition:"background-color 0.2s ease"}),t.appendChild(n),this.highlightElements.push(n)})}renderCopyHint(){if(!this.activeHighlight||this.activeHighlight.rectangles.length===0)return;let t=document.getElementById(`page-${this.activeHighlight.pageNumber}`);if(!t)return;let e=this.activeHighlight.rectangles[0],i=document.createElement("div");i.className="salina-copy-hint",Object.assign(i.style,{position:"absolute",left:`${e.x*this.scale}px`,top:`${(e.y-30)*this.scale}px`,zIndex:"10",animation:"fadeIn 0.3s ease-out",pointerEvents:"auto"});let n=document.createElement("div");n.className="salina-copy-hint-bubble",n.textContent="\u{1F4CB} Copy (Ctrl+C)",Object.assign(n.style,{background:"rgba(0, 0, 0, 0.8)",color:"white",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',cursor:"pointer",userSelect:"none",whiteSpace:"nowrap",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3)",transition:"all 0.2s ease",opacity:"0.9"}),n.addEventListener("click",this.copyToClipboard.bind(this)),n.addEventListener("mouseenter",()=>{n.style.background="rgba(0, 0, 0, 0.9)",n.style.opacity="1",n.style.transform="translateY(-1px)"}),n.addEventListener("mouseleave",()=>{n.style.background="rgba(0, 0, 0, 0.8)",n.style.opacity="0.9",n.style.transform="translateY(0)"}),i.appendChild(n),t.appendChild(i),this.copyHintElement=i}copyToClipboard(){return u(this,null,function*(){if(this.activeHighlight)try{yield navigator.clipboard.writeText(this.activeHighlight.text),console.log("Highlighted text copied to clipboard:",this.activeHighlight.text),this.highlightElements.forEach(t=>{t.classList.add("copied"),t.style.backgroundColor="rgba(0, 255, 0, 0.6)",t.style.transform="scale(1.02)",setTimeout(()=>{t.classList.remove("copied"),t.style.backgroundColor=this.options.highlightColor,t.style.transform="scale(1)"},500)})}catch(t){console.error("Failed to copy text:",t)}})}rerenderHighlights(){this.activeHighlight&&(this.clearHighlights(),this.renderHighlights(),this.options.copyHintEnabled&&this.renderCopyHint())}clearHighlights(){this.highlightElements.forEach(t=>{t.remove()}),this.highlightElements=[],this.copyHintElement&&(this.copyHintElement.remove(),this.copyHintElement=null),this.activeHighlight=null}getActiveHighlight(){return this.activeHighlight}destroy(){this.clearHighlights(),document.removeEventListener("mouseup",this.handleMouseUp.bind(this)),document.removeEventListener("click",this.handleDocumentClick.bind(this)),document.removeEventListener("keydown",this.handleKeyDown.bind(this))}};var y=class{constructor(t){this.searchResults=[];this.searchElements=[];this.options=t}search(t,e){if(this.clearResults(),!t.trim())return[];let i=[],n=0,r=this.options.caseSensitive?t:t.toLowerCase(),a=this.options.wholeWords?new RegExp(`\\b${this.escapeRegExp(r)}\\b`,"g"):null;return e.forEach(h=>{h.items.forEach(o=>{if(!o.str.trim())return;let c=this.options.caseSensitive?o.str:o.str.toLowerCase();this.findMatchIndices(c,r,a).forEach(l=>{i.push({pageNumber:h.pageNumber,text:o.str.substr(l,t.length),position:{x:o.x,y:o.y,width:o.width,height:o.height},textIndex:n,context:this.getContext(o.str,l,t.length)}),n++})})}),this.searchResults=i,this.renderSearchResultsOptimized(),i}findMatchIndices(t,e,i){let n=[];if(i){i.lastIndex=0;let r;for(;(r=i.exec(t))!==null;)n.push(r.index)}else{let r=t.indexOf(e);for(;r!==-1;)n.push(r),r=t.indexOf(e,r+1)}return n}clearResults(){this.searchResults=[],this.clearSearchHighlights()}getResults(){return this.searchResults}destroy(){this.clearResults()}renderSearchResultsOptimized(){let t=new Map;this.searchResults.forEach((e,i)=>{t.has(e.pageNumber)||t.set(e.pageNumber,[]),t.get(e.pageNumber).push(V(f({},e),{originalIndex:i}))}),t.forEach((e,i)=>{this.renderPageHighlights(i,e)})}renderPageHighlights(t,e){let i=document.querySelector(`[data-page-number="${t}"]`);if(!i)return;let n=document.createDocumentFragment();e.forEach(r=>{let a=document.createElement("div");a.className="salina-search-highlight",a.setAttribute("data-search-index",r.originalIndex.toString()),a.style.cssText=`
        position: absolute;
        left: ${r.position.x}px;
        top: ${r.position.y}px;
        width: ${r.position.width}px;
        height: ${r.position.height}px;
        background-color: ${this.options.highlightColor};
        pointer-events: none;
        border-radius: 2px;
        z-index: 15;
      `,n.appendChild(a),this.searchElements.push(a)}),i.appendChild(n)}clearSearchHighlights(){this.searchElements.forEach(t=>t.remove()),this.searchElements=[]}getContext(t,e,i){let r=Math.max(0,e-50),a=Math.min(t.length,e+i+50),h=t.substring(r,a);return r>0&&(h="..."+h),a<t.length&&(h=h+"..."),h}escapeRegExp(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}highlightSearchResult(t){this.searchElements.forEach(i=>i.classList.remove("current"));let e=this.searchElements[t];e&&(e.classList.add("current"),e.scrollIntoView({behavior:"smooth",block:"center"}))}};var d=null;function C(){return new Promise((s,t)=>{if(d){s(d);return}if(typeof window!="undefined"&&window.pdfjsLib){d=window.pdfjsLib,d.GlobalWorkerOptions.workerSrc||(d.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js"),s(d);return}let e=document.createElement("script");e.src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js",e.onload=()=>{window.pdfjsLib?(d=window.pdfjsLib,d.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js",s(d)):t(new Error("PDF.js failed to load"))},e.onerror=()=>t(new Error("Failed to load PDF.js script")),document.head.appendChild(e)})}var x=class{constructor(t,e){this.pdfDocument=null;this.pages=new Map;this.scale=1;this.textContent=[];this.container=t,this.options=e,this.setupPDFWorker()}loadDocument(t){return u(this,null,function*(){try{let e=yield C(),i;t instanceof File?i=yield this.fileToArrayBuffer(t):i=t;let n=e.getDocument(i);return this.pdfDocument=yield n.promise,yield this.extractTextContent(),yield this.renderAllPages(),this.pdfDocument.numPages}catch(e){throw new Error(`Failed to load PDF: ${e}`)}})}renderAllPages(){return u(this,null,function*(){if(!this.pdfDocument)return;yield new Promise(e=>requestAnimationFrame(e));let t=document.createDocumentFragment();for(let e=1;e<=this.pdfDocument.numPages;e++){let i=yield this.renderPage(e);t.appendChild(i),e%3===0&&(yield new Promise(n=>setTimeout(n,0)))}this.container.innerHTML="",this.container.appendChild(t)})}renderPage(t){return u(this,null,function*(){d||(yield C());let e=yield this.pdfDocument.getPage(t),i=e.getViewport({scale:this.scale}),n=document.createElement("div");n.className="salina-pdf-page",n.setAttribute("data-page-number",t.toString()),n.style.cssText=`
      position: relative;
      display: inline-block;
      margin: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      background: white;
    `;let r=document.createElement("canvas"),a=r.getContext("2d");r.width=i.width,r.height=i.height,r.style.display="block",n.appendChild(r),yield e.render({canvasContext:a,viewport:i}).promise;let o=null;(this.options.features.search||this.options.features.highlighting)&&(o=yield this.createTextLayer(e,i,n));let c={pageNumber:t,canvas:r,textLayer:o,scale:this.scale,viewport:i};return this.pages.set(t,c),n})}createTextLayer(t,e,i){return u(this,null,function*(){d||(yield C());let n=yield t.getTextContent(),r=document.createElement("div");return r.className="salina-pdf-text-layer",r.style.cssText=`
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: auto;
      user-select: text;
    `,n.items.forEach(a=>{let h=d,o=h.Util.transform(h.Util.transform(e.transform,a.transform),[1,0,0,-1,0,0]),c=document.createElement("span");c.textContent=a.str,c.style.cssText=`
        position: absolute;
        left: ${o[4]}px;
        top: ${o[5]}px;
        font-size: ${Math.sqrt(o[0]*o[0]+o[1]*o[1])}px;
        font-family: sans-serif;
        pointer-events: auto;
        user-select: text;
      `,r.appendChild(c)}),i.appendChild(r),r})}setScale(t){this.scale=t,this.updatePageScale()}updatePageScale(){this.isInViewport()?this.renderVisiblePages():this.renderAllPages()}renderVisiblePages(){this.getVisiblePages().forEach(e=>{let i=this.container.querySelector(`[data-page-number="${e}"]`);i&&this.updatePageElement(i,e)})}getVisiblePages(){let t=this.container.getBoundingClientRect(),e=[];return this.pages.forEach((i,n)=>{let r=this.container.querySelector(`[data-page-number="${n}"]`);if(r){let a=r.getBoundingClientRect();a.bottom>=t.top&&a.top<=t.bottom&&e.push(n)}}),e}updatePageElement(t,e){return u(this,null,function*(){let i=yield this.pdfDocument.getPage(e),n=i.getViewport({scale:this.scale}),r=t.querySelector("canvas");if(r){r.width=n.width,r.height=n.height;let a=r.getContext("2d");yield i.render({canvasContext:a,viewport:n}).promise}})}isInViewport(){return this.container.clientHeight>0&&this.container.clientWidth>0}goToPage(t){let e=this.container.querySelector(`[data-page-number="${t}"]`);e&&e.scrollIntoView({behavior:"smooth",block:"start"})}calculateFitToWidthScale(){if(!this.pdfDocument||this.pages.size===0)return 1;let t=this.pages.values().next().value,e=this.container.clientWidth-40,i=t.viewport.width;return e/i}calculateFitToHeightScale(){if(!this.pdfDocument||this.pages.size===0)return 1;let t=this.pages.values().next().value,e=this.container.clientHeight-40,i=t.viewport.height;return e/i}getTextContent(){return this.textContent}handleResize(){if(this.options.zoom.fitToWidth){let t=this.calculateFitToWidthScale();this.setScale(t)}else if(this.options.zoom.fitToHeight){let t=this.calculateFitToHeightScale();this.setScale(t)}}destroy(){this.pdfDocument&&this.pdfDocument.destroy(),this.pages.clear(),this.textContent=[]}extractTextContent(){return u(this,null,function*(){if(!this.pdfDocument)return;this.textContent=[];let t=5,e=this.pdfDocument.numPages;for(let i=1;i<=e;i+=t){let n=Math.min(i+t-1,e),r=[];for(let h=i;h<=n;h++)r.push(this.extractPageTextContent(h));let a=yield Promise.all(r);this.textContent.push(...a),n<e&&(yield new Promise(h=>setTimeout(h,0)))}})}extractPageTextContent(t){return u(this,null,function*(){d||(yield C());let e=yield this.pdfDocument.getPage(t),i=yield e.getTextContent(),n=e.getViewport({scale:1});return{pageNumber:t,items:i.items.map(r=>{let a=d,h=a.Util.transform(a.Util.transform(n.transform,r.transform),[1,0,0,-1,0,0]);return{str:r.str,x:h[4],y:h[5],width:r.width,height:r.height}})}})}setupPDFWorker(){}fileToArrayBuffer(t){return u(this,null,function*(){return new Promise((e,i)=>{let n=new FileReader;n.onload=()=>e(n.result),n.onerror=()=>i(n.error),n.readAsArrayBuffer(t)})})}};var R=class extends D.default{constructor(e){super();this.plugins=new Map;this.container=e.container,this.options=this.mergeOptions(e),this.state=this.initializeState(),this.pdfRenderer=new x(this.container,this.options),this.simpleHighlighter=new b({highlightColor:this.options.highlighting.defaultColor||"rgba(255, 255, 0, 0.3)",copyHintEnabled:!0}),this.searchEngine=new y({highlightColor:this.options.search.highlightColor||"rgba(255, 165, 0, 0.6)",caseSensitive:this.options.search.caseSensitive||!1,wholeWords:this.options.search.wholeWords||!1}),this.setupContainer(),this.setupEventListeners(),this.setupResizeObserver(),e.file&&this.loadDocument(e.file)}loadDocument(e){return u(this,null,function*(){var i,n,r,a;try{this.setState({isLoading:!0,error:null});let h=yield this.pdfRenderer.loadDocument(e);this.setState({totalPages:h,currentPage:1,isLoading:!1}),this.emit("document:loaded",h),(n=(i=this.options.callbacks).onLoad)==null||n.call(i,h)}catch(h){let o=h instanceof Error?h:new Error(String(h));throw this.setState({error:o.message,isLoading:!1}),this.emit("document:error",o),(a=(r=this.options.callbacks).onError)==null||a.call(r,o),o}})}destroy(){var e;(e=this.resizeObserver)==null||e.disconnect(),this.pdfRenderer.destroy(),this.simpleHighlighter.destroy(),this.searchEngine.destroy(),this.removeAllListeners(),this.container.innerHTML=""}goToPage(e){var i,n;e<1||e>this.state.totalPages||(this.setState({currentPage:e}),this.pdfRenderer.goToPage(e),this.emit("page:changed",e,this.state.totalPages),(n=(i=this.options.callbacks).onPageChange)==null||n.call(i,e,this.state.totalPages))}nextPage(){this.goToPage(this.state.currentPage+1)}prevPage(){this.goToPage(this.state.currentPage-1)}zoomIn(){let e=Math.min(this.options.zoom.max,this.state.scale+this.options.zoom.step);this.setZoom(e)}zoomOut(){let e=Math.max(this.options.zoom.min,this.state.scale-this.options.zoom.step);this.setZoom(e)}setZoom(e){var n,r;let i=Math.max(this.options.zoom.min,Math.min(this.options.zoom.max,e));i!==this.state.scale&&(this.state.scale=i,this.simpleHighlighter.updateScale(i),this.pdfRenderer.setScale(i),this.emit("zoom:changed",i),(r=(n=this.options.callbacks).onZoom)==null||r.call(n,i))}fitToWidth(){if(!this.container)return;let e=this.pdfRenderer.calculateFitToWidthScale();this.setZoom(e)}fitToHeight(){if(!this.container)return;let e=this.pdfRenderer.calculateFitToHeightScale();this.setZoom(e)}search(e){var n,r;if(!e.trim())return this.clearSearch(),[];this.setState({searchQuery:e});let i=this.searchEngine.search(e,this.pdfRenderer.getTextContent());return this.setState({searchResults:i,currentSearchIndex:i.length>0?0:-1}),this.emit("search:results",i),(r=(n=this.options.callbacks).onSearch)==null||r.call(n,i),i}clearSearch(){this.setState({searchQuery:"",searchResults:[],currentSearchIndex:-1}),this.searchEngine.clearResults(),this.emit("search:cleared")}nextSearchResult(){if(this.state.searchResults.length===0)return;let e=(this.state.currentSearchIndex+1)%this.state.searchResults.length;this.setState({currentSearchIndex:e});let i=this.state.searchResults[e];this.goToPage(i.pageNumber)}prevSearchResult(){if(this.state.searchResults.length===0)return;let e=this.state.currentSearchIndex===0?this.state.searchResults.length-1:this.state.currentSearchIndex-1;this.setState({currentSearchIndex:e});let i=this.state.searchResults[e];this.goToPage(i.pageNumber)}getActiveHighlight(){return this.simpleHighlighter.getActiveHighlight()}clearHighlights(){this.simpleHighlighter.clearHighlights(),this.emit("highlight:cleared")}addHighlight(){console.warn("addHighlight: Simple highlighter only supports mouse-based highlighting")}removeHighlight(){return this.clearHighlights(),!0}getHighlights(){let e=this.getActiveHighlight();return e?[e]:[]}exportHighlights(){let e=this.getActiveHighlight();return JSON.stringify(e?[e]:[],null,2)}importHighlights(){console.warn("importHighlights: Simple highlighter doesn't support highlight importing")}use(e){if(this.plugins.has(e.name))throw new Error(`Plugin '${e.name}' is already installed`);e.install(this),this.plugins.set(e.name,e)}unuse(e){let i=this.plugins.get(e);i&&(i.uninstall(this),this.plugins.delete(e))}getCurrentPage(){return this.state.currentPage}getTotalPages(){return this.state.totalPages}getScale(){return this.state.scale}getSearchResults(){return this.state.searchResults}getCurrentSearchIndex(){return this.state.currentSearchIndex}isLoading(){return this.state.isLoading}getError(){return this.state.error}mergeOptions(e){var i,n,r,a,h,o,c,m,l,T,v,O,M,F,I,A;return{container:e.container,file:(i=e.file)!=null?i:void 0,theme:(n=e.theme)!=null?n:"light",width:(r=e.width)!=null?r:"100%",height:(a=e.height)!=null?a:"100%",features:f({highlighting:!0,search:!0,navigation:!0,zoom:!0,fullscreen:!1,print:!1,download:!1,export:!0,annotations:!1},e.features),highlighting:f({defaultColor:"rgba(255, 255, 0, 0.3)",allowMultipleColors:!1,persistHighlights:!1},e.highlighting),search:f({highlightColor:"rgba(255, 165, 0, 0.6)",caseSensitive:!1,wholeWords:!1},e.search),zoom:f({min:(o=(h=e.zoom)==null?void 0:h.min)!=null?o:.5,max:(m=(c=e.zoom)==null?void 0:c.max)!=null?m:3,step:(T=(l=e.zoom)==null?void 0:l.step)!=null?T:.2,default:(O=(v=e.zoom)==null?void 0:v.default)!=null?O:1,fitToWidth:(F=(M=e.zoom)==null?void 0:M.fitToWidth)!=null?F:!0,fitToHeight:(A=(I=e.zoom)==null?void 0:I.fitToHeight)!=null?A:!0},e.zoom),callbacks:f({onLoad:()=>{},onPageChange:()=>{},onSearch:()=>{},onHighlight:()=>{},onHighlightRemove:()=>{},onError:()=>{},onZoom:()=>{}},e.callbacks)}}initializeState(){return{currentPage:1,totalPages:0,scale:this.options.zoom.default,isLoading:!1,error:null,searchQuery:"",searchResults:[],currentSearchIndex:-1}}setState(e){Object.assign(this.state,e)}setupContainer(){this.container.classList.add("salina-pdf-viewer"),this.container.setAttribute("data-theme",this.options.theme),typeof this.options.width=="number"?this.container.style.width=`${this.options.width}px`:this.container.style.width=this.options.width,typeof this.options.height=="number"?this.container.style.height=`${this.options.height}px`:this.container.style.height=this.options.height}setupEventListeners(){document.addEventListener("keydown",n=>{if(n.ctrlKey||n.metaKey)switch(n.key){case"f":case"F":this.options.features.search&&(n.preventDefault(),this.emit("search:focus"));break;case"+":case"=":n.preventDefault(),this.zoomIn();break;case"-":n.preventDefault(),this.zoomOut();break;case"0":n.preventDefault(),this.setZoom(1);break}});let e,i=()=>{clearTimeout(e),e=window.setTimeout(()=>{},100)};this.container.addEventListener("scroll",i),window.addEventListener("scroll",i),window.addEventListener("resize",()=>{this.pdfRenderer.handleResize()})}setupResizeObserver(){typeof ResizeObserver!="undefined"&&(this.resizeObserver=new ResizeObserver(()=>{this.pdfRenderer.handleResize()}),this.resizeObserver.observe(this.container))}};function oe(){return Math.random().toString(36).substr(2,9)+Date.now().toString(36)}function he(s,t){let e;return(...i)=>{clearTimeout(e),e=setTimeout(()=>s(...i),t)}}function le(s,t){let e;return(...i)=>{e||(s(...i),e=!0,setTimeout(()=>e=!1,t))}}function ce(s,t,e){return Math.min(Math.max(s,t),e)}function ge(s){let t=s.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}function ue(s){let t=s.getClientRects();if(t.length===0)throw new Error("Range has no client rects");let e=1/0,i=1/0,n=-1/0,r=-1/0;for(let a=0;a<t.length;a++){let h=t[a];e=Math.min(e,h.left),i=Math.min(i,h.top),n=Math.max(n,h.right),r=Math.max(r,h.bottom)}return new DOMRect(e,i,n-e,r-i)}function W(s,t){let e=URL.createObjectURL(s),i=document.createElement("a");i.href=e,i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(e)}function pe(s,t,e="application/json"){let i=new Blob([s],{type:e});W(i,t)}function de(s){return new Promise((t,e)=>{let i=new FileReader;i.onload=()=>t(i.result),i.onerror=()=>e(i.error),i.readAsText(s)})}function U(s,t){let e=f({},s);for(let i in t)if(t.hasOwnProperty(i)){let n=t[i],r=e[i];n&&typeof n=="object"&&!Array.isArray(n)&&r&&typeof r=="object"&&!Array.isArray(r)?e[i]=U(r,n):e[i]=n}return e}function q(){return typeof window!="undefined"&&typeof document!="undefined"}function me(){return q()&&("ontouchstart"in window||navigator.maxTouchPoints>0)}function fe(s){let t=["B","KB","MB","GB"],e=s,i=0;for(;e>=1024&&i<t.length-1;)e/=1024,i++;return`${e.toFixed(1)} ${t[i]}`}function K(s){return new Promise(t=>setTimeout(t,s))}function ve(s,t=3,e=1e3){return u(this,null,function*(){let i;for(let n=1;n<=t;n++)try{return yield s()}catch(r){if(i=r,n===t)break;let a=e*Math.pow(2,n-1);yield K(a)}throw i})}var w=class{static debounce(t,e){let i;return(...n)=>{clearTimeout(i),i=setTimeout(()=>t(...n),e)}}static throttle(t,e){let i;return(...n)=>{i||(t(...n),i=!0,setTimeout(()=>i=!1,e))}}static queueTask(t){this.taskQueue.push(t),this.rafId===null&&(this.rafId=requestAnimationFrame(()=>{this.processTasks(),this.rafId=null}))}static processTasks(){this.taskQueue.splice(0).forEach(e=>{try{e()}catch(i){console.error("Task execution error:",i)}})}static createCancellableTimeout(t,e){let i=setTimeout(t,e);return{cancel:()=>clearTimeout(i)}}static measurePerformance(t,e){let i=performance.now(),n=e(),r=performance.now();return console.log(`${t} took ${r-i} milliseconds`),n}static createPerformanceObserver(t){if(typeof PerformanceObserver=="undefined")return null;let e=new PerformanceObserver(i=>{t(i.getEntries())});try{return e.observe({entryTypes:["measure","navigation","paint"]}),e}catch(i){return console.warn("Performance observer not supported:",i),null}}};w.rafId=null,w.taskQueue=[];var E=class{static setCache(t,e){if(this.cache.size>=this.maxCacheSize){let i=this.cache.keys().next().value;this.cache.delete(i)}this.cache.set(t,e)}static getCache(t){return this.cache.get(t)||null}static clearCache(){this.cache.clear()}static getMemoryUsage(){return"memory"in performance?performance.memory:null}static forceGC(){"gc"in window&&typeof window.gc=="function"&&window.gc()}};E.cache=new Map,E.maxCacheSize=50;var L=class{constructor(t,e){this.visibleRange={start:0,end:0};this.totalItems=0;this.container=t,this.itemHeight=e,console.log("VirtualScrolling initialized for container:",t.tagName)}calculateVisibleRange(t,e){let i=Math.floor(t/this.itemHeight),n=Math.ceil(e/this.itemHeight),r=Math.min(i+n+1,this.totalItems-1);return this.visibleRange={start:Math.max(0,i-1),end:r},this.visibleRange}getVisibleRange(){return this.visibleRange}setTotalItems(t){this.totalItems=t}getTotalHeight(){return this.totalItems*this.itemHeight}};var be="3.0.2";return re(ye);})();
//# sourceMappingURL=index.global.js.map